jobs:
- job: Package
  dependsOn:
    - BuildAnyCPU
  pool:
    vmImage: vs2017-win2016
  workspace:
    clean: outputs
  steps:
  - checkout: self
    clean: true

  - download: current
    displayName: 'Download all extension artifacts'
    artifact: XamlStylerExtension

  - task: NugetCommand@2
    displayName: 'Package XamlStyler.Console for NuGet'
    inputs:
      command: pack
      packagesToPack: '**\*.nuspec'

  - publish: $(Build.ArtifactStagingDirectory)
    displayName: 'Publish PackagedXamlStylerExtension artifact'
    artifact: PackagedXamlStylerExtension
